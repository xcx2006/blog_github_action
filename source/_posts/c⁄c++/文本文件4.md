---
title: string用法
date: 2024-10-10 20:50:53
tags:
    - "cpp"
categories:
    - "c/c++"
---
在C++中，`std::string` 是一个表示和操作字符串的类，定义在 `<string>` 头文件中。以下是一些常用的 `std::string` 方法和用法示例：

### 1. 包含头文件
首先，你需要包含 `<string>` 头文件：
```cpp
#include <string>
```

### 2. 创建字符串
```cpp
std::string str1;               // 默认构造函数，创建一个空字符串
std::string str2("Hello");      // 用C风格字符串初始化
std::string str3(str2);         // 用另一个string对象初始化
std::string str4(5, 'c');       // 用字符和重复次数初始化，结果为 "ccccc"
```

### 3. 访问字符串中的字符
```cpp
char ch = str2[0];              // 通过下标访问字符，返回字符的引用
char ch2 = str2.at(0);          // 通过at函数访问字符，抛出异常如果下标越界
```

### 4. 字符串长度
```cpp
size_t len = str2.length();     // 返回字符串的长度
size_t size = str2.size();      // 同 length()
```

### 5. 字符串拼接
```cpp
std::string str5 = str2 + " World";  // 使用 + 运算符拼接字符串
str2.append("!!!");                  // 使用 append 函数追加字符串
str2 += " more text";                // 使用 += 运算符追加字符串
```

### 6. 字符串比较
```cpp
int cmp = str2.compare(str3);       // 比较两个字符串，返回负值、零或正值
bool isEqual = (str2 == str3);      // 使用 == 运算符比较两个字符串
bool isNotEqual = (str2 != str3);   // 使用 != 运算符比较两个字符串
```

### 7. 字符串查找
```cpp
size_t pos = str2.find("lo");       // 查找子字符串的位置，返回第一个匹配的位置
size_t rpos = str2.rfind("o");      // 从右向左查找子字符串的位置
size_t fpos = str2.find_first_of("aeiou"); // 查找第一个元音字符的位置
size_t lpos = str2.find_last_of("aeiou");  // 查找最后一个元音字符的位置
size_t npos = str2.npos;            // 表示未找到的位置（通常是一个很大的值）
```

### 8. 字符串替换
```cpp
std::string str6 = "Hello World";
str6.replace(6, 5, "C++");          // 从索引6开始，替换5个字符为 "C++"
```

### 9. 字符串的子串
```cpp
std::string substr = str2.substr(0, 5); // 获取从索引0开始的5个字符的子串
```

### 10. 字符串的插入和删除
```cpp
str2.insert(5, "!!!");              // 在索引5处插入字符串 "!!!"
str2.erase(5, 3);                   // 从索引5开始删除3个字符
```

### 11. 字符串的转换
```cpp
int num = std::stoi(str2);          // 将字符串转换为整数
double dnum = std::stod(str2);      // 将字符串转换为双精度浮点数
std::string snum = std::to_string(123); // 将整数转换为字符串
```

### 12. 清空字符串
```cpp
str2.clear();                       // 清空字符串
```

### 13. 字符串的拷贝
```cpp
std::string str7 = str2.c_str();    // 获取C风格字符串的拷贝（返回 const char*）
char arr[20];
str2.copy(arr, 20, 0);              // 将字符串内容拷贝到字符数组中，最多拷贝20个字符，从索引0开始
```

### 14. 字符串的填充和修改
```cpp
str2.fill('x');                     // 用字符 'x' 填充整个字符串
str2.resize(10, 'y');               // 调整字符串大小到10个字符，用 'y' 填充新位置
```

这些是 `std::string` 类中一些常用的方法和功能。C++ 标准库提供了丰富的接口，可以方便地处理字符串的各种操作。